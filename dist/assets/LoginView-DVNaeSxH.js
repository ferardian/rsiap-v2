import{y as b,r as m,c as M,o as V,g as I,a as l,b as s,e as c,t as p,z as k,A as w,B as L,n as g,C as R,D as _,E as T,i as n}from"./vendor-abe1rO6K.js";import{_ as A,u as C}from"./index-CXPIpl-L.js";import"./api-B9ygI19o.js";const U={class:"login-page"},B={class:"login-container"},N={class:"card"},D={class:"card-body"},P={key:0,class:"alert alert-error"},q={key:1,class:"alert alert-success"},z={class:"form-group"},E=["disabled"],F={key:0,class:"error-text"},K={class:"form-group"},j=["type","disabled"],G={key:0,class:"error-text"},H={class:"form-group"},J={class:"checkbox-label"},O=["disabled"],Q=["disabled"],W={key:0,class:"spinner"},X={key:1},Y={class:"info-section"},Z={class:"help-links"},$={__name:"LoginView",setup(ss){const v=I(),h=C(),a=b({username:"",password:""}),o=b({username:"",password:""}),f=m(!1),t=m(!1),i=m(""),d=m(""),y=M(()=>a.username.trim()!==""&&a.password.trim()!==""),S=()=>{o.username="",o.password="";let r=!0;return a.username.trim()?a.username.trim().length<3&&(o.username="Username minimal 3 karakter",r=!1):(o.username="Username harus diisi",r=!1),a.password.trim()?a.password.trim().length<4&&(o.password="Password minimal 4 karakter",r=!1):(o.password="Password harus diisi",r=!1),r},x=async()=>{if(i.value="",d.value="",!!S()){t.value=!0;try{const r=await h.login({username:a.username.trim(),password:a.password.trim()});r.success?r.requireRoleSelection?(d.value="Login berhasil! Mohon pilih role...",setTimeout(()=>{v.push("/select-role")},1e3)):(d.value="Login berhasil! Mengalihkan ke dashboard...",setTimeout(()=>{v.push("/dashboard")},1e3)):i.value=r.error}catch(r){i.value="Terjadi kesalahan yang tidak terduga. Silakan coba lagi.",console.error("Login error:",r)}finally{t.value=!1}}};return V(()=>{h.isAuthenticated&&v.push("/dashboard")}),(r,e)=>(n(),l("div",U,[s("div",B,[s("div",N,[e[13]||(e[13]=s("div",{class:"card-header"},[s("div",{class:"logo"},[s("span",null,"RSIA")]),s("h1",null,"SIRS Aplikasi"),s("p",null,"Sistem Informasi Rumah Sakit")],-1)),s("div",D,[i.value?(n(),l("div",P,[e[5]||(e[5]=s("span",null,"âš ï¸",-1)),s("span",null,p(i.value),1)])):c("",!0),d.value?(n(),l("div",q,[e[6]||(e[6]=s("span",null,"âœ…",-1)),s("span",null,p(d.value),1)])):c("",!0),s("form",{onSubmit:k(x,["prevent"])},[s("div",z,[e[7]||(e[7]=s("label",{for:"username",class:"form-label"}," Username / NIK ",-1)),w(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=u=>a.username=u),type:"text",class:g(["form-input",{"is-invalid":o.username}]),placeholder:"Masukkan username atau NIK",disabled:t.value,required:"",autocomplete:"username"},null,10,E),[[L,a.username]]),o.username?(n(),l("div",F,p(o.username),1)):c("",!0)]),s("div",K,[e[8]||(e[8]=s("label",{for:"password",class:"form-label"}," Password ",-1)),w(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=u=>a.password=u),type:f.value?"text":"password",class:g(["form-input",{"is-invalid":o.password}]),placeholder:"Masukkan password",disabled:t.value,required:"",autocomplete:"current-password"},null,10,j),[[R,a.password]]),o.password?(n(),l("div",G,p(o.password),1)):c("",!0)]),s("div",H,[s("label",J,[w(s("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>f.value=u),type:"checkbox",class:"checkbox-input",disabled:t.value},null,8,O),[[T,f.value]]),e[9]||(e[9]=s("span",{class:"checkmark"},null,-1)),e[10]||(e[10]=_(" Tampilkan password ",-1))])]),s("button",{type:"submit",class:"btn btn-primary",disabled:t.value||!y.value},[t.value?(n(),l("div",W)):(n(),l("span",X,"ðŸ”")),s("span",null,p(t.value?"Sedang masuk...":"Masuk"),1)],8,Q)],32),s("div",Y,[e[12]||(e[12]=s("p",{class:"info-text"},[s("strong",null,"Info:"),_(" Gunakan username dan password yang telah terdaftar ")],-1)),s("div",Z,[s("a",{href:"#",class:"help-link",onClick:e[3]||(e[3]=k(()=>{},["prevent"]))}," Lupa password? "),e[11]||(e[11]=s("span",{class:"separator"},"â€¢",-1)),s("a",{href:"#",class:"help-link",onClick:e[4]||(e[4]=k(()=>{},["prevent"]))}," Bantuan IT ")])])])]),e[14]||(e[14]=s("div",{class:"login-footer"},[s("p",null,"Â© 2024 RSIA - Sistem Informasi Rumah Sakit"),s("p",{class:"version"},"Version 2.0.0")],-1))])]))}},rs=A($,[["__scopeId","data-v-a4c71936"]]);export{rs as default};
