import{r as m,y as J,o as q,a as r,i as d,b as t,e as N,D as M,A as _,B as g,F as j,f as U,t as u,z as V,c as W,m as F,p as z,n as H}from"./vendor-abe1rO6K.js";import{a as f}from"./asetMasterService-CzE20kzM.js";import{_ as A}from"./index-CXPIpl-L.js";import"./api-B9ygI19o.js";const O={class:"tab-container"},Q={class:"split-view"},X={class:"section-card"},Y={class:"section-header"},Z={class:"search-bar"},tt={class:"table-responsive"},at={class:"data-table"},et={key:0},st={key:1},nt={class:"action-group"},lt=["onClick"],ot=["onClick"],it={class:"section-card"},dt={class:"section-header"},rt={class:"search-bar"},ut={class:"table-responsive"},ct={class:"data-table"},pt={key:0},mt={key:1},vt={class:"action-group"},kt=["onClick"],bt=["onClick"],ft={class:"modal-content"},_t={class:"modal-header"},gt={class:"modal-body"},yt={class:"form-group"},ht=["disabled"],xt={key:0,class:"text-muted"},$t={class:"form-group"},Ct={class:"modal-footer"},wt=["disabled"],It={__name:"JenisKategoriTab",setup(E){const y=m([]),h=m([]),C=m(!1),x=m(!1),c=J({jenis:"",kategori:""}),k=m(!1),l=m("jenis"),b=m(!1),D=m(!1),o=J({id:"",nama:""}),w=async()=>{C.value=!0;try{const i=await f.getJenis({search:c.jenis,limit:100});i.data.data&&(y.value=i.data.data.data)}catch(i){console.error(i)}finally{C.value=!1}},I=async()=>{x.value=!0;try{const i=await f.getKategori({search:c.kategori,limit:100});i.data.data&&(h.value=i.data.data.data)}catch(i){console.error(i)}finally{x.value=!1}},T=i=>{const a=i==="jenis"?"JI":"KI",$=(i==="jenis"?y.value:h.value).map(B=>{const R=i==="jenis"?B.id_jenis:B.id_kategori;if(R&&R.startsWith(a)){const P=parseInt(R.replace(a,""),10);return isNaN(P)?0:P}return 0}),G=($.length>0?Math.max(...$):0)+1;return`${a}${G.toString().padStart(3,"0")}`},v=i=>{l.value=i,b.value=!1,o.id=T(i),o.nama="",k.value=!0},n=(i,a)=>{l.value=i,b.value=!0,i==="jenis"?(o.id=a.id_jenis,o.nama=a.nama_jenis):(o.id=a.id_kategori,o.nama=a.nama_kategori),k.value=!0},s=()=>{k.value=!1},p=async()=>{var i,a;D.value=!0;try{const e={};l.value==="jenis"?(e.id_jenis=o.id,e.nama_jenis=o.nama,b.value?await f.updateJenis(o.id,e):await f.createJenis(e),w()):(e.id_kategori=o.id,e.nama_kategori=o.nama,b.value?await f.updateKategori(o.id,e):await f.createKategori(e),I()),s()}catch(e){alert("Gagal menyimpan: "+(((a=(i=e.response)==null?void 0:i.data)==null?void 0:a.message)||e.message))}finally{D.value=!1}},K=async(i,a)=>{var e,$;if(confirm("Hapus data ini?"))try{i==="jenis"?(await f.deleteJenis(a),w()):(await f.deleteKategori(a),I())}catch(S){alert("Gagal menghapus: "+((($=(e=S.response)==null?void 0:e.data)==null?void 0:$.message)||S.message))}};return q(()=>{w(),I()}),(i,a)=>(d(),r("div",O,[t("div",Q,[t("div",X,[t("div",Y,[a[7]||(a[7]=t("h3",null,"Jenis Inventaris",-1)),t("button",{onClick:a[0]||(a[0]=e=>v("jenis")),class:"btn-add"},[...a[6]||(a[6]=[t("i",{class:"fas fa-plus"},null,-1),M(" Tambah ",-1)])])]),t("div",Z,[_(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>c.jenis=e),onInput:w,type:"text",placeholder:"Cari Jenis ID / Nama...",class:"form-input"},null,544),[[g,c.jenis]])]),t("div",tt,[t("table",at,[a[12]||(a[12]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Nama Jenis"),t("th",{width:"100"},"Aksi")])],-1)),t("tbody",null,[C.value?(d(),r("tr",et,[...a[8]||(a[8]=[t("td",{colspan:"3",class:"text-center"},"Memuat...",-1)])])):y.value.length===0?(d(),r("tr",st,[...a[9]||(a[9]=[t("td",{colspan:"3",class:"text-center"},"Data kosong",-1)])])):(d(!0),r(j,{key:2},U(y.value,e=>(d(),r("tr",{key:e.id_jenis},[t("td",null,u(e.id_jenis),1),t("td",null,u(e.nama_jenis),1),t("td",null,[t("div",nt,[t("button",{onClick:$=>n("jenis",e),class:"btn-icon text-blue"},[...a[10]||(a[10]=[t("i",{class:"fas fa-pen"},null,-1)])],8,lt),t("button",{onClick:$=>K("jenis",e.id_jenis),class:"btn-icon text-red"},[...a[11]||(a[11]=[t("i",{class:"fas fa-trash"},null,-1)])],8,ot)])])]))),128))])])])]),t("div",it,[t("div",dt,[a[14]||(a[14]=t("h3",null,"Kategori Inventaris",-1)),t("button",{onClick:a[2]||(a[2]=e=>v("kategori")),class:"btn-add"},[...a[13]||(a[13]=[t("i",{class:"fas fa-plus"},null,-1),M(" Tambah ",-1)])])]),t("div",rt,[_(t("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>c.kategori=e),onInput:I,type:"text",placeholder:"Cari Kategori ID / Nama...",class:"form-input"},null,544),[[g,c.kategori]])]),t("div",ut,[t("table",ct,[a[19]||(a[19]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Nama Kategori"),t("th",{width:"100"},"Aksi")])],-1)),t("tbody",null,[x.value?(d(),r("tr",pt,[...a[15]||(a[15]=[t("td",{colspan:"3",class:"text-center"},"Memuat...",-1)])])):h.value.length===0?(d(),r("tr",mt,[...a[16]||(a[16]=[t("td",{colspan:"3",class:"text-center"},"Data kosong",-1)])])):(d(!0),r(j,{key:2},U(h.value,e=>(d(),r("tr",{key:e.id_kategori},[t("td",null,u(e.id_kategori),1),t("td",null,u(e.nama_kategori),1),t("td",null,[t("div",vt,[t("button",{onClick:$=>n("kategori",e),class:"btn-icon text-blue"},[...a[17]||(a[17]=[t("i",{class:"fas fa-pen"},null,-1)])],8,kt),t("button",{onClick:$=>K("kategori",e.id_kategori),class:"btn-icon text-red"},[...a[18]||(a[18]=[t("i",{class:"fas fa-trash"},null,-1)])],8,bt)])])]))),128))])])])])]),k.value?(d(),r("div",{key:0,class:"modal-overlay",onClick:V(s,["self"])},[t("div",ft,[t("div",_t,[t("h3",null,u(b.value?"Edit":"Tambah")+" "+u(l.value==="jenis"?"Jenis":"Kategori"),1),t("button",{onClick:s,class:"close-btn"},"Ã—")]),t("form",{onSubmit:V(p,["prevent"])},[t("div",gt,[t("div",yt,[a[20]||(a[20]=t("label",null,[M("ID / Kode "),t("span",{class:"text-red"},"*")],-1)),_(t("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>o.id=e),type:"text",class:"form-input",required:"",maxlength:"10",disabled:b.value,placeholder:"Contoh: KLS1"},null,8,ht),[[g,o.id]]),b.value?(d(),r("small",xt,"ID tidak dapat diubah")):N("",!0)]),t("div",$t,[t("label",null,[M("Nama "+u(l.value==="jenis"?"Jenis":"Kategori")+" ",1),a[21]||(a[21]=t("span",{class:"text-red"},"*",-1))]),_(t("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>o.nama=e),type:"text",class:"form-input",required:"",maxlength:"40"},null,512),[[g,o.nama]])])]),t("div",Ct,[t("button",{type:"button",onClick:s,class:"btn-cancel"},"Batal"),t("button",{type:"submit",class:"btn-save",disabled:D.value},u(D.value?"Menyimpan...":"Simpan"),9,wt)])],32)])])):N("",!0)]))}},Mt=A(It,[["__scopeId","data-v-2a88f6d6"]]),Dt={class:"tab-container"},Kt={class:"split-view"},Nt={class:"section-card"},St={class:"section-header"},jt={class:"search-bar"},Vt={class:"table-responsive"},Tt={class:"data-table"},Ut={key:0},Rt={key:1},Pt={class:"action-group"},Jt=["onClick"],At=["onClick"],Et={class:"section-card"},Bt={class:"section-header"},qt={class:"search-bar"},Gt={class:"table-responsive"},Lt={class:"data-table"},Ht={key:0},Wt={key:1},Ft={class:"font-bold"},zt={class:"text-xs text-slate-500"},Ot={class:"action-group"},Qt=["onClick"],Xt=["onClick"],Yt={class:"modal-content"},Zt={class:"modal-header"},ta={class:"modal-body"},aa={class:"form-group"},ea=["disabled"],sa={key:0,class:"text-muted"},na={class:"form-group"},la={class:"form-group"},oa={class:"row-2"},ia={class:"form-group"},da={class:"form-group"},ra={class:"form-group"},ua={class:"modal-footer"},ca=["disabled"],pa={__name:"KatalogProdukTab",setup(E){const y=m([]),h=m([]),C=m(!1),x=m(!1),c=J({merk:"",produsen:""}),k=m(!1),l=m("merk"),b=m(!1),D=m(!1),o=J({id:"",nama:"",alamat:"",no_telp:"",email:"",website:""}),w=async()=>{C.value=!0;try{const i=await f.getMerk({search:c.merk,limit:100});i.data.data&&(y.value=i.data.data.data)}catch(i){console.error(i)}finally{C.value=!1}},I=async()=>{x.value=!0;try{const i=await f.getProdusen({search:c.produsen,limit:100});i.data.data&&(h.value=i.data.data.data)}catch(i){console.error(i)}finally{x.value=!1}},T=i=>{const a=i==="merk"?"MI":"PD",e=i==="merk"?y.value:h.value,$=i==="merk"?5:8,S=e.map(R=>{const P=i==="merk"?R.id_merk:R.kode_produsen;if(P&&P.startsWith(a)){const L=parseInt(P.replace(a,""),10);return isNaN(L)?0:L}return 0}),B=(S.length>0?Math.max(...S):0)+1;return`${a}${B.toString().padStart($,"0")}`},v=i=>{l.value=i,b.value=!1,Object.keys(o).forEach(a=>o[a]=""),o.id=T(i),k.value=!0},n=(i,a)=>{l.value=i,b.value=!0,i==="merk"?(o.id=a.id_merk,o.nama=a.nama_merk):(o.id=a.kode_produsen,o.nama=a.nama_produsen,o.alamat=a.alamat_produsen,o.no_telp=a.no_telp,o.email=a.email,o.website=a.website_produsen),k.value=!0},s=()=>{k.value=!1},p=async()=>{var i,a;D.value=!0;try{if(l.value==="merk"){const e={id_merk:o.id,nama_merk:o.nama};b.value?await f.updateMerk(o.id,e):await f.createMerk(e),w()}else{const e={kode_produsen:o.id,nama_produsen:o.nama,alamat_produsen:o.alamat,no_telp:o.no_telp,email:o.email,website_produsen:o.website};b.value?await f.updateProdusen(o.id,e):await f.createProdusen(e),I()}s()}catch(e){alert("Gagal menyimpan: "+(((a=(i=e.response)==null?void 0:i.data)==null?void 0:a.message)||e.message))}finally{D.value=!1}},K=async(i,a)=>{var e,$;if(confirm("Hapus data ini?"))try{i==="merk"?(await f.deleteMerk(a),w()):(await f.deleteProdusen(a),I())}catch(S){alert("Gagal menghapus: "+((($=(e=S.response)==null?void 0:e.data)==null?void 0:$.message)||S.message))}};return q(()=>{w(),I()}),(i,a)=>(d(),r("div",Dt,[t("div",Kt,[t("div",Nt,[t("div",St,[a[11]||(a[11]=t("h3",null,"Merk Inventaris",-1)),t("button",{onClick:a[0]||(a[0]=e=>v("merk")),class:"btn-add"},[...a[10]||(a[10]=[t("i",{class:"fas fa-plus"},null,-1),M(" Tambah ",-1)])])]),t("div",jt,[_(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>c.merk=e),onInput:w,type:"text",placeholder:"Cari Merk ID / Nama...",class:"form-input"},null,544),[[g,c.merk]])]),t("div",Vt,[t("table",Tt,[a[16]||(a[16]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Nama Merk"),t("th",{width:"100"},"Aksi")])],-1)),t("tbody",null,[C.value?(d(),r("tr",Ut,[...a[12]||(a[12]=[t("td",{colspan:"3",class:"text-center"},"Memuat...",-1)])])):y.value.length===0?(d(),r("tr",Rt,[...a[13]||(a[13]=[t("td",{colspan:"3",class:"text-center"},"Data kosong",-1)])])):(d(!0),r(j,{key:2},U(y.value,e=>(d(),r("tr",{key:e.id_merk},[t("td",null,u(e.id_merk),1),t("td",null,u(e.nama_merk),1),t("td",null,[t("div",Pt,[t("button",{onClick:$=>n("merk",e),class:"btn-icon text-blue"},[...a[14]||(a[14]=[t("i",{class:"fas fa-pen"},null,-1)])],8,Jt),t("button",{onClick:$=>K("merk",e.id_merk),class:"btn-icon text-red"},[...a[15]||(a[15]=[t("i",{class:"fas fa-trash"},null,-1)])],8,At)])])]))),128))])])])]),t("div",Et,[t("div",Bt,[a[18]||(a[18]=t("h3",null,"Produsen Inventaris",-1)),t("button",{onClick:a[2]||(a[2]=e=>v("produsen")),class:"btn-add"},[...a[17]||(a[17]=[t("i",{class:"fas fa-plus"},null,-1),M(" Tambah ",-1)])])]),t("div",qt,[_(t("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>c.produsen=e),onInput:I,type:"text",placeholder:"Cari Kode / Nama Produsen...",class:"form-input"},null,544),[[g,c.produsen]])]),t("div",Gt,[t("table",Lt,[a[23]||(a[23]=t("thead",null,[t("tr",null,[t("th",null,"Kode"),t("th",null,"Produsen"),t("th",null,"Telp"),t("th",{width:"100"},"Aksi")])],-1)),t("tbody",null,[x.value?(d(),r("tr",Ht,[...a[19]||(a[19]=[t("td",{colspan:"4",class:"text-center"},"Memuat...",-1)])])):h.value.length===0?(d(),r("tr",Wt,[...a[20]||(a[20]=[t("td",{colspan:"4",class:"text-center"},"Data kosong",-1)])])):(d(!0),r(j,{key:2},U(h.value,e=>(d(),r("tr",{key:e.kode_produsen},[t("td",null,u(e.kode_produsen),1),t("td",null,[t("div",Ft,u(e.nama_produsen),1),t("div",zt,u(e.website_produsen),1)]),t("td",null,u(e.no_telp),1),t("td",null,[t("div",Ot,[t("button",{onClick:$=>n("produsen",e),class:"btn-icon text-blue"},[...a[21]||(a[21]=[t("i",{class:"fas fa-pen"},null,-1)])],8,Qt),t("button",{onClick:$=>K("produsen",e.kode_produsen),class:"btn-icon text-red"},[...a[22]||(a[22]=[t("i",{class:"fas fa-trash"},null,-1)])],8,Xt)])])]))),128))])])])])]),k.value?(d(),r("div",{key:0,class:"modal-overlay",onClick:V(s,["self"])},[t("div",Yt,[t("div",Zt,[t("h3",null,u(b.value?"Edit":"Tambah")+" "+u(l.value==="merk"?"Merk":"Produsen"),1),t("button",{onClick:s,class:"close-btn"},"Ã—")]),t("form",{onSubmit:V(p,["prevent"])},[t("div",ta,[t("div",aa,[t("label",null,[M(u(l.value==="merk"?"ID Merk":"Kode Produsen")+" ",1),a[24]||(a[24]=t("span",{class:"text-red"},"*",-1))]),_(t("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>o.id=e),type:"text",class:"form-input",required:"",maxlength:"10",disabled:b.value},null,8,ea),[[g,o.id]]),b.value?(d(),r("small",sa,"ID tidak dapat diubah")):N("",!0)]),t("div",na,[t("label",null,[M("Nama "+u(l.value==="merk"?"Merk":"Produsen")+" ",1),a[25]||(a[25]=t("span",{class:"text-red"},"*",-1))]),_(t("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>o.nama=e),type:"text",class:"form-input",required:"",maxlength:"40"},null,512),[[g,o.nama]])]),l.value==="produsen"?(d(),r(j,{key:0},[t("div",la,[a[26]||(a[26]=t("label",null,"Alamat",-1)),_(t("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>o.alamat=e),type:"text",class:"form-input",maxlength:"70"},null,512),[[g,o.alamat]])]),t("div",oa,[t("div",ia,[a[27]||(a[27]=t("label",null,"No. Telp",-1)),_(t("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>o.no_telp=e),type:"text",class:"form-input",maxlength:"13"},null,512),[[g,o.no_telp]])]),t("div",da,[a[28]||(a[28]=t("label",null,"Email",-1)),_(t("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>o.email=e),type:"email",class:"form-input",maxlength:"25"},null,512),[[g,o.email]])])]),t("div",ra,[a[29]||(a[29]=t("label",null,"Website",-1)),_(t("input",{"onUpdate:modelValue":a[9]||(a[9]=e=>o.website=e),type:"text",class:"form-input",maxlength:"30"},null,512),[[g,o.website]])])],64)):N("",!0)]),t("div",ua,[t("button",{type:"button",onClick:s,class:"btn-cancel"},"Batal"),t("button",{type:"submit",class:"btn-save",disabled:D.value},u(D.value?"Menyimpan...":"Simpan"),9,ca)])],32)])])):N("",!0)]))}},ma=A(pa,[["__scopeId","data-v-982688a8"]]),va={class:"tab-container"},ka={class:"section-card"},ba={class:"search-bar"},fa={class:"table-responsive"},_a={class:"data-table"},ga={key:0},ya={key:1},ha={class:"action-group"},xa=["onClick"],$a=["onClick"],Ca={class:"modal-content"},wa={class:"modal-header"},Ia={class:"modal-body"},Ma={class:"form-group"},Da=["disabled"],Ka={key:0,class:"text-muted"},Na={class:"form-group"},Sa={class:"modal-footer"},ja=["disabled"],Va={__name:"RuangLokasiTab",setup(E){const y=m([]),h=m(!1),C=m(""),x=m(!1),c=m(!1),k=m(!1),l=J({id:"",nama:""}),b=async()=>{h.value=!0;try{const n=await f.getRuang({search:C.value,limit:100});n.data.data&&(y.value=n.data.data.data)}catch(n){console.error(n)}finally{h.value=!1}},D=()=>{const n="RI",s=y.value.map(i=>{const a=i.id_ruang;if(a&&a.startsWith(n)){const e=parseInt(a.replace(n,""),10);return isNaN(e)?0:e}return 0}),K=(s.length>0?Math.max(...s):0)+1;return`${n}${K.toString().padStart(3,"0")}`},o=()=>{c.value=!1,l.id=D(),l.nama="",x.value=!0},w=n=>{c.value=!0,l.id=n.id_ruang,l.nama=n.nama_ruang,x.value=!0},I=()=>{x.value=!1},T=async()=>{var n,s;k.value=!0;try{const p={id_ruang:l.id,nama_ruang:l.nama};c.value?await f.updateRuang(l.id,p):await f.createRuang(p),b(),I()}catch(p){alert("Gagal menyimpan: "+(((s=(n=p.response)==null?void 0:n.data)==null?void 0:s.message)||p.message))}finally{k.value=!1}},v=async n=>{var s,p;if(confirm("Hapus ruang ini?"))try{await f.deleteRuang(n),b()}catch(K){alert("Gagal menghapus: "+(((p=(s=K.response)==null?void 0:s.data)==null?void 0:p.message)||K.message))}};return q(()=>{b()}),(n,s)=>(d(),r("div",va,[t("div",ka,[t("div",{class:"section-header"},[s[4]||(s[4]=t("h3",null,"Ruang & Lokasi Inventaris",-1)),t("button",{onClick:o,class:"btn-add"},[...s[3]||(s[3]=[t("i",{class:"fas fa-plus"},null,-1),M(" Tambah ",-1)])])]),t("div",ba,[_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>C.value=p),onInput:b,type:"text",placeholder:"Cari ID / Nama Ruang...",class:"form-input"},null,544),[[g,C.value]])]),t("div",fa,[t("table",_a,[s[9]||(s[9]=t("thead",null,[t("tr",null,[t("th",{width:"150"},"ID Ruang"),t("th",null,"Nama Ruang"),t("th",{width:"100"},"Aksi")])],-1)),t("tbody",null,[h.value?(d(),r("tr",ga,[...s[5]||(s[5]=[t("td",{colspan:"3",class:"text-center"},"Memuat...",-1)])])):y.value.length===0?(d(),r("tr",ya,[...s[6]||(s[6]=[t("td",{colspan:"3",class:"text-center"},"Data kosong",-1)])])):(d(!0),r(j,{key:2},U(y.value,p=>(d(),r("tr",{key:p.id_ruang},[t("td",null,u(p.id_ruang),1),t("td",null,u(p.nama_ruang),1),t("td",null,[t("div",ha,[t("button",{onClick:K=>w(p),class:"btn-icon text-blue"},[...s[7]||(s[7]=[t("i",{class:"fas fa-pen"},null,-1)])],8,xa),t("button",{onClick:K=>v(p.id_ruang),class:"btn-icon text-red"},[...s[8]||(s[8]=[t("i",{class:"fas fa-trash"},null,-1)])],8,$a)])])]))),128))])])])]),x.value?(d(),r("div",{key:0,class:"modal-overlay",onClick:V(I,["self"])},[t("div",Ca,[t("div",wa,[t("h3",null,u(c.value?"Edit":"Tambah")+" Ruang",1),t("button",{onClick:I,class:"close-btn"},"Ã—")]),t("form",{onSubmit:V(T,["prevent"])},[t("div",Ia,[t("div",Ma,[s[10]||(s[10]=t("label",null,[M("ID Ruang "),t("span",{class:"text-red"},"*")],-1)),_(t("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>l.id=p),type:"text",class:"form-input",required:"",maxlength:"5",disabled:c.value,placeholder:"Contoh: R01"},null,8,Da),[[g,l.id]]),c.value?(d(),r("small",Ka,"ID tidak dapat diubah")):N("",!0)]),t("div",Na,[s[11]||(s[11]=t("label",null,[M("Nama Ruang "),t("span",{class:"text-red"},"*")],-1)),_(t("input",{"onUpdate:modelValue":s[2]||(s[2]=p=>l.nama=p),type:"text",class:"form-input",required:"",maxlength:"40"},null,512),[[g,l.nama]])])]),t("div",Sa,[t("button",{type:"button",onClick:I,class:"btn-cancel"},"Batal"),t("button",{type:"submit",class:"btn-save",disabled:k.value},u(k.value?"Menyimpan...":"Simpan"),9,ja)])],32)])])):N("",!0)]))}},Ta=A(Va,[["__scopeId","data-v-96986d23"]]),Ua={class:"tab-container"},Ra={class:"section-card"},Pa={class:"search-bar"},Ja={class:"table-responsive"},Aa={class:"data-table"},Ea={key:0},Ba={key:1},qa={class:"font-bold"},Ga={class:"text-xs text-slate-500"},La={class:"text-sm"},Ha={class:"text-xs text-slate-500"},Wa={key:0,class:"text-sm font-semibold"},Fa={key:1,class:"text-xs"},za={key:2,class:"text-xs text-muted"},Oa={class:"action-group"},Qa=["onClick"],Xa=["onClick"],Ya={class:"modal-content"},Za={class:"modal-header"},te={class:"modal-body"},ae={class:"form-group"},ee=["disabled"],se={key:0,class:"text-muted"},ne={class:"form-group"},le={class:"row-2"},oe={class:"form-group"},ie={class:"form-group"},de={class:"form-group"},re={class:"row-2"},ue={class:"form-group"},ce={class:"form-group"},pe={class:"modal-footer"},me=["disabled"],ve={__name:"SupplierTab",setup(E){const y=m([]),h=m(!1),C=m(""),x=m(!1),c=m(!1),k=m(!1),l=J({id:"",nama:"",alamat:"",kota:"",no_telp:"",bank:"",rekening:""}),b=async()=>{h.value=!0;try{const v=await f.getSuplier({search:C.value,limit:100});v.data.data&&(y.value=v.data.data.data)}catch(v){console.error(v)}finally{h.value=!1}},D=()=>{c.value=!1,Object.keys(l).forEach(v=>l[v]=""),x.value=!0},o=v=>{c.value=!0,l.id=v.kode_suplier,l.nama=v.nama_suplier,l.alamat=v.alamat,l.kota=v.kota,l.no_telp=v.no_telp,l.bank=v.nama_bank,l.rekening=v.rekening,x.value=!0},w=()=>{x.value=!1},I=async()=>{var v,n;k.value=!0;try{const s={kode_suplier:l.id,nama_suplier:l.nama,alamat:l.alamat,kota:l.kota,no_telp:l.no_telp,nama_bank:l.bank,rekening:l.rekening};c.value?await f.updateSuplier(l.id,s):await f.createSuplier(s),b(),w()}catch(s){alert("Gagal menyimpan: "+(((n=(v=s.response)==null?void 0:v.data)==null?void 0:n.message)||s.message))}finally{k.value=!1}},T=async v=>{var n,s;if(confirm("Hapus supplier ini?"))try{await f.deleteSuplier(v),b()}catch(p){alert("Gagal menghapus: "+(((s=(n=p.response)==null?void 0:n.data)==null?void 0:s.message)||p.message))}};return q(()=>{b()}),(v,n)=>(d(),r("div",Ua,[t("div",Ra,[t("div",{class:"section-header"},[n[9]||(n[9]=t("h3",null,"Supplier Aset & Inventaris",-1)),t("button",{onClick:D,class:"btn-add"},[...n[8]||(n[8]=[t("i",{class:"fas fa-plus"},null,-1),M(" Tambah ",-1)])])]),t("div",Pa,[_(t("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>C.value=s),onInput:b,type:"text",placeholder:"Cari Kode / Nama Supplier...",class:"form-input"},null,544),[[g,C.value]])]),t("div",Ja,[t("table",Aa,[n[14]||(n[14]=t("thead",null,[t("tr",null,[t("th",null,"Kode"),t("th",null,"Nama Supplier"),t("th",null,"Alamat & Kota"),t("th",null,"Bank & Rekening"),t("th",{width:"100"},"Aksi")])],-1)),t("tbody",null,[h.value?(d(),r("tr",Ea,[...n[10]||(n[10]=[t("td",{colspan:"5",class:"text-center"},"Memuat...",-1)])])):y.value.length===0?(d(),r("tr",Ba,[...n[11]||(n[11]=[t("td",{colspan:"5",class:"text-center"},"Data kosong",-1)])])):(d(!0),r(j,{key:2},U(y.value,s=>(d(),r("tr",{key:s.kode_suplier},[t("td",null,u(s.kode_suplier),1),t("td",null,[t("div",qa,u(s.nama_suplier),1),t("div",Ga,u(s.no_telp),1)]),t("td",null,[t("div",La,u(s.alamat),1),t("div",Ha,u(s.kota),1)]),t("td",null,[s.nama_bank?(d(),r("div",Wa,u(s.nama_bank),1)):N("",!0),s.rekening?(d(),r("div",Fa,u(s.rekening),1)):N("",!0),!s.nama_bank&&!s.rekening?(d(),r("div",za,"-")):N("",!0)]),t("td",null,[t("div",Oa,[t("button",{onClick:p=>o(s),class:"btn-icon text-blue"},[...n[12]||(n[12]=[t("i",{class:"fas fa-pen"},null,-1)])],8,Qa),t("button",{onClick:p=>T(s.kode_suplier),class:"btn-icon text-red"},[...n[13]||(n[13]=[t("i",{class:"fas fa-trash"},null,-1)])],8,Xa)])])]))),128))])])])]),x.value?(d(),r("div",{key:0,class:"modal-overlay",onClick:V(w,["self"])},[t("div",Ya,[t("div",Za,[t("h3",null,u(c.value?"Edit":"Tambah")+" Supplier",1),t("button",{onClick:w,class:"close-btn"},"Ã—")]),t("form",{onSubmit:V(I,["prevent"])},[t("div",te,[t("div",ae,[n[15]||(n[15]=t("label",null,[M("Kode Supplier "),t("span",{class:"text-red"},"*")],-1)),_(t("input",{"onUpdate:modelValue":n[1]||(n[1]=s=>l.id=s),type:"text",class:"form-input",required:"",maxlength:"5",disabled:c.value},null,8,ee),[[g,l.id]]),c.value?(d(),r("small",se,"Kode tidak dapat diubah")):N("",!0)]),t("div",ne,[n[16]||(n[16]=t("label",null,[M("Nama Supplier "),t("span",{class:"text-red"},"*")],-1)),_(t("input",{"onUpdate:modelValue":n[2]||(n[2]=s=>l.nama=s),type:"text",class:"form-input",required:"",maxlength:"50"},null,512),[[g,l.nama]])]),t("div",le,[t("div",oe,[n[17]||(n[17]=t("label",null,"Kota",-1)),_(t("input",{"onUpdate:modelValue":n[3]||(n[3]=s=>l.kota=s),type:"text",class:"form-input",maxlength:"20"},null,512),[[g,l.kota]])]),t("div",ie,[n[18]||(n[18]=t("label",null,"No. Telp",-1)),_(t("input",{"onUpdate:modelValue":n[4]||(n[4]=s=>l.no_telp=s),type:"text",class:"form-input",maxlength:"13"},null,512),[[g,l.no_telp]])])]),t("div",de,[n[19]||(n[19]=t("label",null,"Alamat",-1)),_(t("textarea",{"onUpdate:modelValue":n[5]||(n[5]=s=>l.alamat=s),class:"form-input",maxlength:"50",rows:"2"},null,512),[[g,l.alamat]])]),t("div",re,[t("div",ue,[n[20]||(n[20]=t("label",null,"Nama Bank",-1)),_(t("input",{"onUpdate:modelValue":n[6]||(n[6]=s=>l.bank=s),type:"text",class:"form-input",maxlength:"30"},null,512),[[g,l.bank]])]),t("div",ce,[n[21]||(n[21]=t("label",null,"No. Rekening",-1)),_(t("input",{"onUpdate:modelValue":n[7]||(n[7]=s=>l.rekening=s),type:"text",class:"form-input",maxlength:"20"},null,512),[[g,l.rekening]])])])]),t("div",pe,[t("button",{type:"button",onClick:w,class:"btn-cancel"},"Batal"),t("button",{type:"submit",class:"btn-save",disabled:k.value},u(k.value?"Menyimpan...":"Simpan"),9,me)])],32)])])):N("",!0)]))}},ke=A(ve,[["__scopeId","data-v-70f34fb5"]]),be={class:"master-data-page"},fe={class:"tabs-nav"},_e=["onClick"],ge={class:"tab-content"},ye={__name:"MasterDataView",setup(E){const y=[{id:"jenis-kategori",label:"Jenis & Kategori",icon:"fas fa-tags",component:Mt},{id:"katalog",label:"Katalog Produk",icon:"fas fa-box-open",component:ma},{id:"ruang",label:"Ruang & Lokasi",icon:"fas fa-map-marker-alt",component:Ta},{id:"supplier",label:"Relasi Supplier",icon:"fas fa-handshake",component:ke}],h=m(y[0].id),C=W(()=>{var x;return(x=y.find(c=>c.id===h.value))==null?void 0:x.component});return(x,c)=>(d(),r("div",be,[c[0]||(c[0]=t("div",{class:"page-header"},[t("h2",null,"ðŸ“¦ Master Data Aset & Fasilitas"),t("p",{class:"subtitle"},"Kelola data master inventaris, lokasi, dan supplier.")],-1)),t("div",fe,[(d(),r(j,null,U(y,k=>t("button",{key:k.id,class:H(["tab-btn",{active:h.value===k.id}]),onClick:l=>h.value=k.id},[t("i",{class:H(k.icon)},null,2),M(" "+u(k.label),1)],10,_e)),64))]),t("div",ge,[(d(),F(z(C.value)))])]))}},we=A(ye,[["__scopeId","data-v-d50d0ce3"]]);export{we as default};
