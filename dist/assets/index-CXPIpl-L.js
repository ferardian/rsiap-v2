const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginView-DVNaeSxH.js","assets/vendor-abe1rO6K.js","assets/api-B9ygI19o.js","assets/LoginView-BIKwqEwL.css","assets/DashboardView-DpyzekKt.js","assets/notification-DtWby6W5.js","assets/role-tX4kyy7r.js","assets/DashboardView-D3LMfrvc.css","assets/BedAvailabilityView-DcMblCsu.js","assets/SearchableSelect-Lnl9dbY0.js","assets/SearchableSelect-B118ZyUF.css","assets/BedAvailabilityView-49So0Trx.css","assets/MenuManagementView-BkECfDzi.js","assets/MenuManagementView-b9DhwrkG.css","assets/RoleManagementView-UHz3ahIl.js","assets/RoleManagementView-C1UL3cGG.css","assets/UserManagementView-BNZeExSB.js","assets/UserManagementView-ofegUDh1.css","assets/RoleMenuManagementView-Bwr3Ev6Q.js","assets/RoleMenuManagementView-CtMU73tf.css","assets/SelectRoleView-B5nVgrhy.js","assets/SelectRoleView-fFKkH53p.css","assets/JadwalPegawaiView-9rP5khjA.js","assets/jadwalPegawaiService-C8wkHlFU.js","assets/JadwalPegawaiView-CD0vJhD6.css","assets/InputJadwalAdminView-Ct3dz9uF.js","assets/InputJadwalAdminView-Bqa5X7ux.css","assets/ApprovalJadwalView-CtDldu9X.js","assets/ApprovalJadwalView-D9R22XiB.css","assets/JadwalTambahanView-DUC3IbAf.js","assets/jadwalTambahanService-D8qiHJJ3.js","assets/JadwalTambahanView-mQjL8ngT.css","assets/ApprovalJadwalTambahanView-BntDjcQp.js","assets/ApprovalJadwalTambahanView-Dkl_AwB9.css","assets/KaryawanView-Cazk4Ddb.js","assets/pegawaiService-B330j5v3.js","assets/KaryawanView-DRWkC7VL.css","assets/PengajuanCutiView-CyVfgm-m.js","assets/PengajuanCutiView-bOLCG2Nt.css","assets/ApprovalCutiView-CW6_7dyg.js","assets/ApprovalCutiView-DUhH44aX.css","assets/MasterDataView-BqOMwWVs.js","assets/asetMasterService-CzE20kzM.js","assets/MasterDataView-Bkou3WUm.css","assets/ManajemenInventarisView-DzGd9Q-m.js","assets/asetInventarisService-8MSbNnQZ.js","assets/ManajemenInventarisView-C6F7_p3N.css","assets/PemeliharaanView-BaJDSk__.js","assets/PemeliharaanView-BVgZ2ehj.css"])))=>i.map(i=>d[i]);
import{d as O,r as H,c as b,w as se,o as x,a as _,b as l,e as L,t as A,F as V,f as N,n as S,u as G,g as X,h as W,i as g,j as $,k as U,l as re,T as te,m as Q,p as Y,q as ae,s as ne,v as oe,x as ie}from"./vendor-abe1rO6K.js";import{a as le}from"./api-B9ygI19o.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();const j={public:{API_V2_URL:"https://api.rsia-hospital.com/api/v2"},requestConfig:{timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}},i=le.create({baseURL:j.public.API_V2_URL,timeout:j.requestConfig.timeout,headers:j.requestConfig.headers});i.interceptors.request.use(e=>{const s=localStorage.getItem("access_token");s&&(e.headers.Authorization=`Bearer ${s}`);const r=localStorage.getItem("active_role");if(r)try{const t=JSON.parse(r);t&&t.id_role&&(e.headers["X-Role-ID"]=t.id_role)}catch{}return e},e=>Promise.reject(e));i.interceptors.response.use(e=>e,e=>{var s;return((s=e.response)==null?void 0:s.status)===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const K={async login(e){try{const s=await i.post("/user/auth/login",{username:e.username,password:e.password});localStorage.setItem("access_token",s.data.access_token);const r=await this.getUserDetail();return localStorage.setItem("user",JSON.stringify(r)),{success:!0,data:s.data,user:r}}catch(s){let r="Login gagal. Silakan coba lagi.";if(s.response){const t=s.response.data;switch(s.response.status){case 401:r=t.message||"Username atau password salah";break;case 422:r="Format input tidak valid";break;case 429:r="Terlalu banyak percobaan. Silakan coba lagi dalam 1 menit";break;default:r=t.message||r}}else s.request&&(r="Tidak dapat terhubung ke server. Periksa koneksi internet Anda.");return{success:!1,error:r}}},async getUserDetail(){try{return(await i.get("/user/auth/detail")).data}catch(e){throw e}},async logout(){try{await i.get("/user/auth/logout")}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("access_token"),localStorage.removeItem("user")}},isLoggedIn(){return!!localStorage.getItem("access_token")},getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},getToken(){return localStorage.getItem("access_token")}},E={async getAllMenus(e={}){return(await i.get("/menu-management/menus",{params:e})).data},async getMenuTree(e={}){return(await i.get("/menu-management/menus/tree",{params:e})).data},async getUserMenus(){return(await i.get("/menu-management/user-menus")).data},async createMenu(e){return(await i.post("/menu-management/menus",e)).data},async getMenu(e){return(await i.get(`/menu-management/menus/${e}`)).data},async updateMenu(e,s){return(await i.put(`/menu-management/menus/${e}`,s)).data},async deleteMenu(e){return(await i.delete(`/menu-management/menus/${e}`)).data},async reorderMenus(e){return(await i.post("/menu-management/menus/reorder",{menu_order:e})).data},async checkAccess(e,s="can_view"){return(await i.post("/menu-management/role-permissions/check-access",{menu_id:e,permission:s})).data},async getRoleMenuSummary(){return(await i.get("/menu-management/role-permissions/summary")).data},async getRolePermissions(e){return(await i.get(`/menu-management/role-permissions/role/${e}`)).data},async getRoleMenuDetails(e){return(await i.get(`/menu-management/role-permissions/role/${e}/details`)).data},async updateRolePermissions(e,s){return(await i.post(`/menu-management/role-permissions/role/${e}`,{permissions:s})).data},async copyRolePermissions(e,s){return(await i.post("/menu-management/role-permissions/copy",{source_role_id:e,target_role_id:s})).data},async checkUserAccess(e,s,r=null){const t={menu_id:e,permission:s};return r&&(t.user_id=r),(await i.post("/menu-management/role-permissions/check-access",t)).data}},T={async getAllAccessLevels(e={}){return(await i.get("/user-management/roles",{params:e})).data},async getAccessLevelsWithPegawai(){return(await i.get("/user-management/roles/with-petugas")).data},async getAllUserAccess(){return(await i.get("/user-management/user-access")).data},async createAccessLevel(e){return(await i.post("/user-management/roles",e)).data},async getAccessLevel(e){return(await i.get(`/user-management/roles/${e}`)).data},async updateAccessLevel(e,s){return(await i.put(`/user-management/roles/${e}`,s)).data},async deleteAccessLevel(e){return(await i.delete(`/user-management/roles/${e}`)).data},async getAccessLevelPermissions(e){return(await i.get(`/user-management/roles/${e}/permissions`)).data},async updateAccessLevelPermissions(e,s){return(await i.post(`/user-management/roles/${e}/permissions`,{permissions:s})).data},async assignRoleToUser(e){return(await i.post("/user-management/user-access/assign",e)).data},async removeRoleFromUser(e,s){return(await i.delete(`/user-management/user-access/${e}/role/${s}`)).data}},I={async getAllPegawai(e={}){return(await i.get("/user-management/pegawai",{params:e})).data},async getPegawai(e){return(await i.get(`/user-management/pegawai/${e}`)).data},async searchPegawai(e,s={}){return(await i.get("/user-management/pegawai/search",{params:{q:e,...s}})).data},async getPegawaiStatistics(){return(await i.get("/user-management/pegawai/statistics")).data},async assignAccessLevelToPegawai(e,s,r){var a,n;const t={nip:e,access_level_id:parseInt(s),user_id:parseInt(r)};console.log("ðŸ” Sending role assignment request:",t);try{const o=await i.post(`/user-management/pegawai/${e}/role/assign`,{access_level_id:parseInt(s),user_id:r});return console.log("âœ… Role assignment response:",o.data),o.data}catch(o){throw console.error("âŒ Role assignment error:",o),console.error("âŒ Error response:",(a=o.response)==null?void 0:a.data),console.error("âŒ Error status:",(n=o.response)==null?void 0:n.status),o}},async removeAccessLevelFromPegawai(e,s){return(await i.delete(`/user-management/pegawai/${e}/role/${s}`)).data},async getPegawaiAccessLevels(e){return(await i.get(`/user-management/pegawai/${e}/roles`)).data},async createPegawai(e){return(await i.post("/user-management/pegawai",e)).data},async updatePegawai(e,s){return(await i.put(`/user-management/pegawai/${e}`,s)).data},async deletePegawai(e){return(await i.delete(`/user-management/pegawai/${e}`)).data}},J=O("menu",{state:()=>({menus:[],userMenus:[],accessLevels:[],loading:!1,error:null,selectedMenu:null}),getters:{menuTree:e=>e.userMenus||[],flatMenuList:e=>e.menus.sort((s,r)=>s.urutan-r.urutan),getMenuById:e=>s=>e.menus.find(r=>r.id_menu===s),hasMenuPermission:e=>(s,r="can_view")=>{const t=(n,o)=>{for(const u of n){if(u.id_menu===o)return u;if(u.children&&u.children.length>0){const m=t(u.children,o);if(m)return m}}return null},a=t(e.userMenus,s);return a?!!a[r]:!1}},actions:{async fetchAllMenus(){var e,s,r,t;this.loading=!0,this.error=null;try{console.log("Menu store: Calling getAllMenus...");const a=await E.getAllMenus();return console.log("Menu store: API response:",a),this.menus=a.data||[],console.log("Menu store: Menus set to:",this.menus),{success:!0,data:this.menus}}catch(a){return console.error("Menu store: Error details:",a),console.error("Menu store: Error response:",a.response),console.error("Menu store: Error status:",(e=a.response)==null?void 0:e.status),console.error("Menu store: Error data:",(s=a.response)==null?void 0:s.data),this.error=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Gagal mengambil data menu",{success:!1,error:this.error}}finally{this.loading=!1}},async fetchUserMenus(){var e,s;this.loading=!0,this.error=null;try{const r=await E.getUserMenus();return this.userMenus=r.data||[],{success:!0,data:this.userMenus}}catch(r){return this.error=((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal mengambil data menu user",{success:!1,error:this.error}}finally{this.loading=!1}},async createMenu(e){var s,r;this.loading=!0,this.error=null;try{const t=await E.createMenu(e);return this.menus.push(t.data),{success:!0,data:t.data}}catch(t){return this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal membuat menu",{success:!1,error:this.error}}finally{this.loading=!1}},async updateMenu(e,s){var r,t;this.loading=!0,this.error=null;try{const a=await E.updateMenu(e,s),n=this.menus.findIndex(o=>o.id_menu===e);return n!==-1&&(this.menus[n]={...this.menus[n],...a.data}),{success:!0,data:a.data}}catch(a){return this.error=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Gagal update menu",{success:!1,error:this.error}}finally{this.loading=!1}},async deleteMenu(e){var s,r;this.loading=!0,this.error=null;try{return await E.deleteMenu(e),this.menus=this.menus.filter(t=>t.id_menu!==e),{success:!0}}catch(t){return this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal hapus menu",{success:!1,error:this.error}}finally{this.loading=!1}},async reorderMenus(e){var s,r;this.loading=!0,this.error=null;try{const t=await E.reorderMenus(e);return await this.fetchAllMenus(),{success:!0,data:t.data}}catch(t){return this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal mengurutkan menu",{success:!1,error:this.error}}finally{this.loading=!1}},clearMenus(){this.menus=[],this.userMenus=[],this.accessLevels=[]},async checkAccess(e,s="can_view"){var r;try{return((r=(await E.checkAccess(e,s)).data)==null?void 0:r.has_access)||!1}catch(t){return console.error("Error checking access:",t),!1}},setSelectedMenu(e){this.selectedMenu=e},clearError(){this.error=null}}}),We=O("role",{state:()=>({roles:[],loading:!1,error:null,selectedRole:null}),actions:{async fetchAllRoles(){var e,s;this.loading=!0,this.error=null;try{console.log("ðŸŒ Calling API: accessLevelService.getAllAccessLevels()");const r=await T.getAllAccessLevels();return console.log("ðŸ“¦ API Response:",r),this.roles=r.data||[],console.log("ðŸ’¾ Store roles set to:",this.roles),{success:!0,data:this.roles}}catch(r){return console.error("ðŸš¨ API Error:",r),console.error("ðŸš¨ Error response:",r.response),this.error=((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal mengambil data role",{success:!1,error:this.error}}finally{this.loading=!1}},async createRole(e){var s,r;this.loading=!0,this.error=null;try{const t=await T.createAccessLevel(e);return this.roles.push(t.data),{success:!0,data:t.data}}catch(t){return this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal membuat role",{success:!1,error:this.error}}finally{this.loading=!1}},async updateRole(e,s){var r,t;this.loading=!0,this.error=null;try{const a=await T.updateAccessLevel(e,s),n=this.roles.findIndex(o=>o.id_role===e);return n!==-1&&(this.roles[n]={...this.roles[n],...a.data}),{success:!0,data:a.data}}catch(a){return this.error=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Gagal update role",{success:!1,error:this.error}}finally{this.loading=!1}},async deleteRole(e){var s,r;this.loading=!0,this.error=null;try{return await T.deleteAccessLevel(e),this.roles=this.roles.filter(t=>t.id_role!==e),{success:!0}}catch(t){return this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal hapus role",{success:!1,error:this.error}}finally{this.loading=!1}},async assignRoleToPegawai(e,s,r){var t,a;this.loading=!0,this.error=null;try{console.log("ðŸŽ­ Assigning role:",{nip:e,roleId:s,userId:r});const n=await I.assignAccessLevelToPegawai(e,s,r);return console.log("âœ… Role assignment successful:",n),{success:!0,data:n.data}}catch(n){return console.error("âŒ Role assignment failed:",n),console.error("âŒ Error response:",n.response),this.error=((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.message)||"Gagal menugaskan role",{success:!1,error:this.error}}finally{this.loading=!1}}}}),Be=O("user",{state:()=>({users:[],loading:!1,error:null,selectedUser:null}),actions:{async fetchAllUsers(){var e,s;this.loading=!0,this.error=null;try{console.log("ðŸŒ Calling API: pegawaiService.getAllPegawai()");const r=await I.getAllPegawai({limit:1e3});return console.log("ðŸ“¦ API Response:",r),this.users=r.data||[],console.log("ðŸ’¾ Store users set to:",this.users),r.data&&r.data.data&&Array.isArray(r.data.data)&&(this.users=r.data.data),console.log("ðŸ” About to call enrichUsersWithRoles..."),console.log("ðŸš€ Calling enrichUsersWithRoles..."),await this.enrichUsersWithRoles(),console.log("âœ… enrichUsersWithRoles completed"),{success:!0,data:this.users}}catch(r){return console.error("ðŸš¨ API Error:",r),console.error("ðŸš¨ Error response:",r.response),this.error=((s=(e=r.response)==null?void 0:e.data)==null?void 0:s.message)||"Gagal mengambil data user",{success:!1,error:this.error}}finally{this.loading=!1}},async enrichUsersWithRoles(){try{console.log("ðŸŽ­ Using backend LEFT JOIN role data"),console.log("â„¹ï¸  Backend PegawaiController now provides complete role data via LEFT JOIN"),console.log("âœ… Role data already included in backend response")}catch(e){console.error("âŒ Error in enrichUsersWithRoles:",e)}},async createUser(e){var s,r;this.loading=!0,this.error=null;try{const t=await I.createPegawai(e);return this.users.push(t.data),{success:!0,data:t.data}}catch(t){return this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal membuat user",{success:!1,error:this.error}}finally{this.loading=!1}},async updateUser(e,s){var r,t;this.loading=!0,this.error=null;try{const a=await I.updatePegawai(e,s),n=this.users.findIndex(o=>o.id_user===e);return n!==-1&&(this.users[n]={...this.users[n],...a.data}),{success:!0,data:a.data}}catch(a){return this.error=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Gagal update user",{success:!1,error:this.error}}finally{this.loading=!1}},async deleteUser(e){var s,r;this.loading=!0,this.error=null;try{return await I.deletePegawai(e),this.users=this.users.filter(t=>t.id_user!==e),{success:!0}}catch(t){return this.error=((r=(s=t.response)==null?void 0:s.data)==null?void 0:r.message)||"Gagal hapus user",{success:!1,error:this.error}}finally{this.loading=!1}}}}),q=O("auth",{state:()=>({user:null,token:null,activeRole:null,userRoles:[],isLoading:!1,error:null}),getters:{isAuthenticated:e=>!!e.token,hasRoleSelected:e=>!!e.activeRole,userName:e=>{var s,r,t,a,n,o,u;return((r=(s=e.user)==null?void 0:s.detail)==null?void 0:r.nama)||((n=(a=(t=e.user)==null?void 0:t.data)==null?void 0:a.detail)==null?void 0:n.nama)||((o=e.user)==null?void 0:o.nama)||((u=e.user)==null?void 0:u.name)||"User"},userRole:e=>{var s,r,t;return((s=e.activeRole)==null?void 0:s.nama_role)||((t=(r=e.user)==null?void 0:r.detail)==null?void 0:t.role)||"guest"},userPosition:e=>{var s,r;return((r=(s=e.user)==null?void 0:s.detail)==null?void 0:r.jbtn)||"-"},userDepartment:e=>{var s,r,t,a,n,o;return((r=(s=e.user)==null?void 0:s.detail)==null?void 0:r.departemen)||((n=(a=(t=e.user)==null?void 0:t.data)==null?void 0:a.detail)==null?void 0:n.departemen)||((o=e.user)==null?void 0:o.departemen)||"-"}},actions:{initAuth(){const e=localStorage.getItem("access_token"),s=localStorage.getItem("user"),r=localStorage.getItem("active_role"),t=localStorage.getItem("user_roles");e&&s&&(this.token=e,this.user=JSON.parse(s),r&&(this.activeRole=JSON.parse(r)),t&&(this.userRoles=JSON.parse(t)))},async login(e){this.isLoading=!0,this.error=null;try{const s=await K.login(e);if(s.success){this.token=s.data.access_token,this.user=s.user;try{const r=await I.getPegawaiAccessLevels(s.user.detail.nip);this.userRoles=r.data||[],localStorage.setItem("user_roles",JSON.stringify(this.userRoles))}catch(r){console.error("Failed to fetch user roles:",r),this.userRoles=[]}return this.userRoles.length===1?(await this.selectRole(this.userRoles[0]),{success:!0,requireRoleSelection:!1}):this.userRoles.length>1?{success:!0,requireRoleSelection:!0}:{success:!0,requireRoleSelection:!1}}else return this.error=s.error,{success:!1,error:s.error}}catch{return this.error="Terjadi kesalahan yang tidak terduga",{success:!1,error:this.error}}finally{this.isLoading=!1}},async selectRole(e){this.activeRole=e,localStorage.setItem("active_role",JSON.stringify(e)),await J().fetchUserMenus()},async logout(){this.isLoading=!0;try{await K.logout()}finally{this.user=null,this.token=null,this.activeRole=null,this.userRoles=[],this.error=null,this.isLoading=!1,localStorage.removeItem("active_role"),localStorage.removeItem("user_roles"),J().clearMenus()}},clearError(){this.error=null}}}),Z=(e,s)=>{const r=e.__vccOpts||e;for(const[t,a]of s)r[t]=a;return r},ue={class:"sidebar-brand"},ce={key:0,class:"brand-text"},de={key:0,class:"sidebar-profile"},me={class:"profile-info"},pe={class:"profile-name"},he={class:"profile-role"},ge={class:"sidebar-nav"},fe={class:"nav-list"},_e=["onClick"],ve={key:0,class:"nav-text"},ye={key:0,class:"nav-sublist"},we={class:"nav-text"},Ae={class:"sidebar-footer"},Re={__name:"Sidebar",props:{isCollapsed:{type:Boolean,default:!1}},emits:["toggle-collapse"],setup(e,{emit:s}){const r=s,t=G(),a=X(),n=J(),o=q(),u=H([]),m=b(()=>n.menuTree||[]),y=b(()=>o.userName),D=b(()=>o.userRole),f=()=>{r("toggle-collapse")},w=c=>c?t.path.startsWith(c):!1,v=c=>c?/[^\u0000-\u007F]/.test(c):!1,k=c=>{if(!c)return"fas fa-circle nav-icon";if(v(c))return"nav-icon emoji-icon";let h=c;return c.includes("fa-")?c.startsWith("fa ")&&(h=c.replace("fa ","fas ")):h=`fas fa-${c}`,`${h} nav-icon`},P=c=>c&&v(c)?c:"",R=c=>{if(c.children&&c.children.length>0){const h=u.value.indexOf(c.id_menu);h===-1?u.value=[c.id_menu]:u.value.splice(h,1)}else c.route&&a.push(c.route)},C=()=>{if(!m.value||m.value.length===0)return;const c=t.path;for(const h of m.value)h.children&&h.children.length>0&&h.children.some(p=>p.route&&c.startsWith(p.route))&&(u.value.includes(h.id_menu)||u.value.push(h.id_menu))};return se(()=>t.path,()=>{C()}),x(async()=>{n.userMenus.length===0&&await n.fetchUserMenus(),C()}),(c,h)=>{const F=W("router-link");return g(),_("aside",{class:S(["sidebar",{collapsed:e.isCollapsed}])},[l("div",ue,[h[1]||(h[1]=l("div",{class:"brand-logo"},[l("span",null,"ðŸ¥")],-1)),e.isCollapsed?L("",!0):(g(),_("div",ce,[...h[0]||(h[0]=[l("h1",null,"RSIA",-1),l("p",null,"Sistem Informasi",-1)])]))]),e.isCollapsed?L("",!0):(g(),_("div",de,[l("div",me,[l("span",pe,A(y.value),1),l("span",he,A(D.value),1)])])),l("nav",ge,[l("ul",fe,[(g(!0),_(V,null,N(m.value,p=>(g(),_("li",{key:p.id_menu,class:"nav-item"},[l("div",{class:S(["nav-link",{active:w(p.route),"has-children":p.children&&p.children.length>0}]),onClick:M=>R(p)},[l("span",{class:S(k(p.icon))},A(P(p.icon)),3),e.isCollapsed?L("",!0):(g(),_("span",ve,A(p.nama_menu),1)),p.children&&p.children.length>0&&!e.isCollapsed?(g(),_("i",{key:1,class:S(["fas fa-chevron-right arrow-icon",{rotated:u.value.includes(p.id_menu)}])},null,2)):L("",!0)],10,_e),p.children&&p.children.length>0&&u.value.includes(p.id_menu)&&!e.isCollapsed?(g(),_("ul",ye,[(g(!0),_(V,null,N(p.children,M=>(g(),_("li",{key:M.id_menu,class:"nav-item"},[$(F,{to:M.route,class:"nav-link sub-link","active-class":"active"},{default:U(()=>[l("span",{class:S(`${k(M.icon)} sub-icon`)},A(P(M.icon)),3),l("span",we,A(M.nama_menu),1)]),_:2},1032,["to"])]))),128))])):L("",!0)]))),128))])]),l("div",Ae,[l("button",{class:"collapse-btn",onClick:f},A(e.isCollapsed?"â–¶":"â—€"),1)])],2)}}},be=Z(Re,[["__scopeId","data-v-30236f5b"]]),Se={class:"main-layout"},ke={class:"top-header"},Pe={class:"header-left"},Ee={class:"breadcrumb-container"},Me={class:"breadcrumb"},Le={key:0,class:"fas fa-chevron-right separator"},Ie={class:"header-right"},De={class:"user-info"},Ce={class:"user-details"},$e={class:"user-name"},Te={class:"user-dept"},Ue={class:"main-content"},Oe={__name:"MainLayout",setup(e){const s=X(),r=G(),t=q(),a=H(!1);b(()=>t.userRole);const n=b(()=>{const w=r.path,v={"/dashboard":"Dashboard","/dashboard/overview":"Dashboard","/sdi/jadwal":"SDI > Pengajuan Jadwal","/sdi/input-jadwal-admin":"SDI > Input Jadwal Admin","/sdi/aproval-jadwal-kerja":"SDI > Approval Jadwal Kerja","/sdi/karyawan":"SDI > Data Karyawan","/admin/menu":"Admin > Manajemen Menu","/admin/role":"Admin > Manajemen Role","/admin/user":"Admin > Manajemen User","/admin/role-menu":"Admin > Manajemen Role-Menu"};if(v[w])return v[w];const k=w.split("/").filter(R=>R);return k.length===0?"Dashboard":k.map(R=>R.split("-").map(C=>C.charAt(0).toUpperCase()+C.slice(1)).join(" ")).join(" > ")||r.meta.title||"Dashboard"}),o=b(()=>n.value.split(" > ").map(w=>w.trim())),u=b(()=>(console.log("Auth Store User Data:",t.user),console.log("User Name from getter:",t.userName),t.userName)),m=b(()=>(console.log("User Department from getter:",t.userDepartment),t.userDepartment)),y=()=>{a.value=!a.value},D=async()=>{await t.logout(),s.push("/login")},f=()=>{window.innerWidth<768&&(a.value=!0)};return x(()=>{f(),window.addEventListener("resize",f)}),re(()=>{window.removeEventListener("resize",f)}),(w,v)=>{const k=W("router-view");return g(),_("div",Se,[$(be,{"is-collapsed":a.value,onToggleCollapse:y},null,8,["is-collapsed"]),l("div",{class:S(["content-wrapper",{"sidebar-collapsed":a.value}])},[l("header",ke,[l("div",Pe,[l("button",{class:"hamburger-btn",onClick:y}," â˜° "),l("div",Ee,[l("div",Me,[(g(!0),_(V,null,N(o.value,(P,R)=>(g(),_("span",{key:R,class:"breadcrumb-item"},[l("span",{class:S(["crumb-text",{active:R===o.value.length-1}])},A(P),3),R<o.value.length-1?(g(),_("i",Le)):L("",!0)]))),128))])])]),l("div",Ie,[l("div",De,[l("div",Ce,[l("span",$e,A(u.value),1),l("span",Te,A(m.value),1)]),v[0]||(v[0]=l("div",{class:"user-avatar"},[l("i",{class:"fas fa-user-circle"})],-1))]),l("div",{class:"user-actions"},[l("button",{onClick:D,class:"btn-logout",title:"Keluar"},[...v[1]||(v[1]=[l("i",{class:"fas fa-sign-out-alt"},null,-1),l("span",null,"Keluar",-1)])])])])]),l("main",Ue,[$(k,null,{default:U(({Component:P})=>[$(te,{name:"fade",mode:"out-in"},{default:U(()=>[(g(),Q(Y(P)))]),_:2},1024)]),_:1})]),l("div",{class:S(["sidebar-backdrop",{show:!a.value}]),onClick:y},null,2)],2)])}}},qe=Z(Oe,[["__scopeId","data-v-0804e872"]]),je={__name:"App",setup(e){const s=G(),r=q(),t=b(()=>s.meta.requiresAuth||s.name!=="Login"&&r.isAuthenticated?qe:"div");return x(()=>{r.initAuth()}),(a,n)=>{const o=W("router-view");return g(),Q(Y(t.value),null,{default:U(()=>[$(o)]),_:1})}}},Ve="modulepreload",Ne=function(e){return"/"+e},z={},d=function(s,r,t){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(m=>{if(m=Ne(m),m in z)return;z[m]=!0;const y=m.endsWith(".css"),D=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${D}`))return;const f=document.createElement("link");if(f.rel=y?"stylesheet":Ve,y||(f.as="script"),f.crossOrigin="",f.href=m,u&&f.setAttribute("nonce",u),document.head.appendChild(f),y)return new Promise((w,v)=>{f.addEventListener("load",w),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}function n(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return a.then(o=>{for(const u of o||[])u.status==="rejected"&&n(u.reason);return s().catch(n)})},Je=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:()=>d(()=>import("./LoginView-DVNaeSxH.js"),__vite__mapDeps([0,1,2,3])),meta:{requiresGuest:!0}},{path:"/dashboard",redirect:"/dashboard/overview"},{path:"/dashboard/overview",name:"DashboardOverview",component:()=>d(()=>import("./DashboardView-DpyzekKt.js"),__vite__mapDeps([4,1,5,6,2,7])),meta:{requiresAuth:!0}},{path:"/dashboard/bed",name:"BedAvailability",component:()=>d(()=>import("./BedAvailabilityView-DcMblCsu.js"),__vite__mapDeps([8,1,5,9,10,2,11])),meta:{requiresAuth:!0}},{path:"/admin/menu",name:"MenuManagement",component:()=>d(()=>import("./MenuManagementView-BkECfDzi.js"),__vite__mapDeps([12,1,5,2,13])),meta:{requiresAuth:!0}},{path:"/admin/role",name:"RoleManagement",component:()=>d(()=>import("./RoleManagementView-UHz3ahIl.js"),__vite__mapDeps([14,1,6,5,2,15])),meta:{requiresAuth:!0}},{path:"/admin/user",name:"UserManagement",component:()=>d(()=>import("./UserManagementView-BNZeExSB.js"),__vite__mapDeps([16,1,6,5,2,17])),meta:{requiresAuth:!0}},{path:"/admin/role-menu",name:"RoleMenuManagement",component:()=>d(()=>import("./RoleMenuManagementView-Bwr3Ev6Q.js"),__vite__mapDeps([18,1,5,2,19])),meta:{requiresAuth:!0}},{path:"/select-role",name:"SelectRole",component:()=>d(()=>import("./SelectRoleView-B5nVgrhy.js"),__vite__mapDeps([20,1,5,2,21])),meta:{requiresAuth:!0}},{path:"/sdi/jadwal",name:"JadwalPegawai",component:()=>d(()=>import("./JadwalPegawaiView-9rP5khjA.js"),__vite__mapDeps([22,1,23,9,10,2,24])),meta:{requiresAuth:!0}},{path:"/sdi/input-jadwal-admin",name:"InputJadwalAdmin",component:()=>d(()=>import("./InputJadwalAdminView-Ct3dz9uF.js"),__vite__mapDeps([25,1,23,9,10,2,26])),meta:{requiresAuth:!0}},{path:"/sdi/aproval-jadwal-kerja",name:"ApprovalJadwal",component:()=>d(()=>import("./ApprovalJadwalView-CtDldu9X.js"),__vite__mapDeps([27,1,23,9,10,2,28])),meta:{requiresAuth:!0}},{path:"/sdi/jadwal-tambahan",name:"JadwalTambahan",component:()=>d(()=>import("./JadwalTambahanView-DUC3IbAf.js"),__vite__mapDeps([29,1,30,9,10,2,31])),meta:{requiresAuth:!0}},{path:"/sdi/aproval-jadwal-tambahan",name:"ApprovalJadwalTambahan",component:()=>d(()=>import("./ApprovalJadwalTambahanView-BntDjcQp.js"),__vite__mapDeps([32,1,30,9,10,2,33])),meta:{requiresAuth:!0}},{path:"/sdi/karyawan",name:"DataKaryawan",component:()=>d(()=>import("./KaryawanView-Cazk4Ddb.js"),__vite__mapDeps([34,1,35,2,36])),meta:{requiresAuth:!0}},{path:"/sdi/pengajuan-cuti",name:"PengajuanCuti",component:()=>d(()=>import("./PengajuanCutiView-CyVfgm-m.js"),__vite__mapDeps([37,1,5,9,10,2,38])),meta:{requiresAuth:!0}},{path:"/sdi/aproval-cuti",name:"ApprovalCuti",component:()=>d(()=>import("./ApprovalCutiView-CW6_7dyg.js"),__vite__mapDeps([39,9,1,10,5,2,40])),meta:{requiresAuth:!0}},{path:"/aset-fasilitas/master-data",name:"MasterDataAset",component:()=>d(()=>import("./MasterDataView-BqOMwWVs.js"),__vite__mapDeps([41,1,42,2,43])),meta:{requiresAuth:!0}},{path:"/aset-fasilitas/manajemen-inventaris",name:"ManajemenInventaris",component:()=>d(()=>import("./ManajemenInventarisView-DzGd9Q-m.js"),__vite__mapDeps([44,1,45,42,9,10,35,2,46])),meta:{requiresAuth:!0}},{path:"/aset-fasilitas/pemeliharaan",name:"PemeliharaanAset",component:()=>d(()=>import("./PemeliharaanView-BaJDSk__.js"),__vite__mapDeps([47,1,45,35,2,9,10,48])),meta:{requiresAuth:!0}}],ee=ae({history:ne(),routes:Je});ee.beforeEach((e,s,r)=>{const t=q();!t.token&&localStorage.getItem("access_token")&&t.initAuth(),e.meta.requiresAuth&&!t.isAuthenticated?r("/login"):e.meta.requiresGuest&&t.isAuthenticated?r("/dashboard"):r()});const B=oe(je);B.use(ie());B.use(ee);B.mount("#app");export{Z as _,J as a,We as b,Be as c,i as d,T as e,d as f,E as m,I as p,q as u};
